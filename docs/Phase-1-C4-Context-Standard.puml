@startuml C4_Context_Standard
!theme plain
skinparam componentStyle rectangle
skinparam defaultFontSize 10
skinparam roundcorner 10
skinparam shadowing true

title Диаграмма контекста: Система анализа аварийных сигналов

' Определение цветов
skinparam person {
    BackgroundColor #E8F4F8
    BorderColor #2E5C8A
    FontColor #2E5C8A
}

skinparam system {
    BackgroundColor #4A90E2
    BorderColor #2E5C8A
    FontColor #FFFFFF
}

skinparam systemExt {
    BackgroundColor #FFF4E6
    BorderColor #FFA500
    FontColor #2E5C8A
}

' Пользователи системы
person "Диспетчер ЕДС\n\nМониторит аварийные сигналы,\nзапускает анализ объектов" as dispatcher
person "Мастер ЦДНГ\n\nПросматривает результаты анализа,\nработает с рекомендациями" as master
person "Руководство ЦДНГ\n\nПринимает решения по рекомендациям,\nуправляет уставками" as manager
person "Специалист отдела\n\nАнализирует рекомендации\nпо замене оборудования" as specialist
person "Администратор системы\n\nУправляет системой,\nнастраивает интеграции" as admin

' Центральная система
rectangle "Система анализа\nаварийных сигналов\n\nАвтоматизирует анализ аварийных\nсигналов, проверяет уставки,\nгенерирует рекомендации" as system #4A90E2

' Внешние системы
rectangle "АСДКУ\n\nАвтоматизированная система\nдиспетчерского контроля и управления.\nИсточник данных параметров\nв реальном времени" as asdku #FFF4E6
rectangle "ИС «МЕГА»\n\nИнформационная система.\nИсточник исторических\nданных параметров" as mega #FFF4E6
rectangle "ИС «Проток»\n\nИнформационная система.\nИсточник исторических\nданных параметров" as protok #FFF4E6
rectangle "ЕССД\n\nЕдиная система сбора данных.\nИсточник списка\nаварийных сигналов" as essd #FFF4E6
rectangle "КИС «Армитс»\n\nКорпоративная информационная\nсистема. Источник объемов\nперекачки и прогнозов" as armits #FFF4E6
rectangle "1С ТОиР\n\nСистема технического\nобслуживания и ремонта.\nИсточник метаданных\nоборудования" as toir #FFF4E6
rectangle "СЭД\n\nСистема электронного\nдокументооборота. Источник\nперечней блокировок\nи сигнализаций" as sed #FFF4E6
rectangle "РД\n\nРуководящие документы.\nИсточник нормативных\nтребований" as rd #FFF4E6

' Взаимодействия пользователей с системой
dispatcher --> system : Просматривает дашборд,\nзапускает анализ\n(HTTPS)
master --> system : Просматривает результаты анализа,\nработает с рекомендациями\n(HTTPS)
manager --> system : Принимает решения по рекомендациям,\nуправляет уставками\n(HTTPS)
specialist --> system : Анализирует рекомендации\nпо оборудованию\n(HTTPS)
admin --> system : Управляет системой,\nнастраивает интеграции\n(HTTPS)

' Интеграции с внешними системами
system --> asdku : Получает данные параметров\nв реальном времени\n(REST API/OPC UA)
system --> mega : Получает исторические\nданные параметров\n(REST API)
system --> protok : Получает исторические\nданные параметров\n(REST API)
system --> essd : Получает список\nаварийных сигналов\n(REST API/WebSocket)
system --> armits : Получает объемы перекачки\nи прогнозы\n(REST API)
system --> toir : Получает метаданные\nоборудования\n(REST API/Файловый обмен)
system --> sed : Получает перечни блокировок\nи сигнализаций\n(REST API/Файловый обмен)
system --> rd : Читает нормативные\nтребования\n(Файловое хранилище)

legend right
  |<#E8F4F8> **Типы элементов** |
  |<#E8F4F8> Person | Пользователь системы |
  |<#4A90E2> System | Система анализа аварийных сигналов |
  |<#FFF4E6> System_Ext | Внешняя система |
  
  |<#2E5C8A> **Типы связей** |
  | HTTPS | Взаимодействие через веб-интерфейс |
  | REST API | Интеграция через REST API |
  | OPC UA | Интеграция через OPC UA протокол |
  | WebSocket | Интеграция через WebSocket |
  | Файловый обмен | Интеграция через файловый обмен |
  | Файловое хранилище | Чтение из файлового хранилища |
endlegend

@enduml




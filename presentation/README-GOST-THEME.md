# Тема оформления диаграмм в стиле ГОСТ

## Описание

Централизованная тема оформления PlantUML диаграмм, соответствующая стандартам ГОСТ для технической документации.

## Использование

### Базовое использование

Добавьте директиву `!include` в начало вашей диаграммы:

```plantuml
@startuml MyDiagram
!include gost-theme.puml

title Моя диаграмма

' Ваш код диаграммы здесь
start
:Действие;
stop

@enduml
```

### Направление диаграмм

Диаграммы используют вертикальное направление по умолчанию (сверху вниз), что обеспечивает лучшую совместимость с kroki.io.

**Примечание:** Директива `left to right direction` не поддерживается kroki.io для activity диаграмм и может вызывать ошибки рендеринга.

### Переопределение параметров

Если для конкретной диаграммы нужно изменить некоторые параметры темы, добавьте `skinparam` после `!include`:

```plantuml
@startuml MyDiagram
!include gost-theme.puml

' Переопределение цвета фона для activity
skinparam activity {
    BackgroundColor #F0F0F0
}

title Моя диаграмма

start
:Действие;
stop

@enduml
```


## Характеристики темы ГОСТ

### Цветовая схема
- **Основной фон**: Белый (#FFFFFF)
- **Элементы**: Светло-серый (#F5F5F5)
- **Границы**: Черный (#000000)
- **Текст**: Черный (#000000)
- **Заметки**: Светло-желтый (#FFFFCC)

### Шрифты
- **Основной шрифт**: Arial
- **Размер по умолчанию**: 10pt
- **Заголовки**: 14pt, жирный
- **Заметки**: 9pt, курсив

### Стиль оформления
- **Скругление углов**: 5px (минимальное)
- **Тени**: Отключены
- **Тип линий**: Ортогональный (ortho)
- **Толщина стрелок**: 1-2px
- **Отступы в блоках**: 10px (предотвращает наложение стрелок на текст)
- **Направление**: Вертикальное (сверху вниз) по умолчанию для совместимости с kroki.io

## Поддерживаемые типы диаграмм

Тема настроена для следующих типов диаграмм:

- ✅ Activity (Активности)
- ✅ Sequence (Последовательности)
- ✅ State (Состояний)
- ✅ Component (Компонентов)
- ✅ Class (Классов)
- ✅ Use Case (Вариантов использования)
- ✅ Person/System (C4-стиль)

## Структура файлов

```
presentation/
├── public/
│   └── diagrams/
│       ├── gost-theme.puml      # Файл темы
│       ├── slide1-*.puml         # Диаграммы с темой
│       └── ...
└── README-GOST-THEME.md          # Эта документация
```

## Технические детали

### Разрешение include директив

Рендерер PlantUML автоматически разрешает директивы `!include` при загрузке диаграмм. Поддерживаются:

- Относительные пути от папки `diagrams/`
- Рекурсивное включение (include файлы могут включать другие файлы)
- Обработка ошибок (при недоступности файла include игнорируется)

### Пример работы include

```plantuml
@startuml Example
!include gost-theme.puml
' Содержимое gost-theme.puml будет встроено здесь

title Пример
@enduml
```

При загрузке диаграммы рендерер:
1. Загружает основной файл диаграммы
2. Находит директиву `!include gost-theme.puml`
3. Загружает файл `gost-theme.puml`
4. Рекурсивно разрешает все include в файле темы
5. Заменяет директиву на содержимое файла
6. Отправляет итоговый код в kroki.io для рендеринга

## Соответствие ГОСТ

Тема разработана с учетом требований ГОСТ для технической документации:

- ✅ Черно-белая или ограниченная цветовая палитра
- ✅ Стандартные читаемые шрифты
- ✅ Четкие линии и границы
- ✅ Минимальные декоративные элементы
- ✅ Профессиональный внешний вид
- ✅ Единообразие оформления
- ✅ Предотвращение наложения элементов (стрелки не перекрывают текст)

## Кастомизация

### Создание варианта темы

Если нужен вариант темы для специфических случаев:

1. Скопируйте `gost-theme.puml` в новый файл (например, `gost-theme-color.puml`)
2. Измените нужные параметры
3. Используйте новый файл в диаграммах:

```plantuml
@startuml MyDiagram
!include gost-theme-color.puml
' ...
@enduml
```

### Изменение базовой темы

Для изменения темы для всех диаграмм:

1. Откройте `public/diagrams/gost-theme.puml`
2. Измените нужные параметры `skinparam`
3. Все диаграммы, использующие `!include gost-theme.puml`, автоматически получат обновления

## Примеры

### Activity диаграмма

```plantuml
@startuml ActivityExample
!include gost-theme.puml

title Пример диаграммы активности

start
:Действие 1;
:Действие 2;
stop

@enduml
```

**Примечание:** Диаграммы используют вертикальное направление по умолчанию для обеспечения совместимости с kroki.io.

### Sequence диаграмма

```plantuml
@startuml SequenceExample
!include gost-theme.puml

title Пример диаграммы последовательности

actor Пользователь
participant Система

Пользователь -> Система: Запрос
Система -> Пользователь: Ответ

@enduml
```

### Component диаграмма

```plantuml
@startuml ComponentExample
!include gost-theme.puml

title Пример диаграммы компонентов

component [Компонент 1] as C1
component [Компонент 2] as C2

C1 --> C2

@enduml
```

## Миграция существующих диаграмм

Для миграции существующих диаграмм на тему ГОСТ:

1. Замените `!theme plain` на `!include gost-theme.puml`
2. Удалите кастомные `skinparam`, которые уже определены в теме
3. Оставьте только специфичные переопределения (если нужны)

**Было:**
```plantuml
@startuml OldDiagram
!theme plain
skinparam activity {
    BackgroundColor #E8F4F8
    BorderColor #2E5C8A
}
' ...
@enduml
```

**Стало:**
```plantuml
@startuml NewDiagram
!include gost-theme.puml
' ...
@enduml
```

## Поддержка

При возникновении проблем:

1. Проверьте, что файл `gost-theme.puml` существует в `public/diagrams/`
2. Убедитесь, что путь в `!include` корректен
3. Проверьте консоль браузера на наличие ошибок загрузки
4. Убедитесь, что рендерер поддерживает include (проверьте версию кода)

## Дополнительные ресурсы

- [Документация PlantUML](https://plantuml.com/)
- [PlantUML Skinparam](https://plantuml.com/skinparam)
- [PlantUML Themes](https://plantuml.com/theme)

